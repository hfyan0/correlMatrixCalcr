#!/bin/bash

# SYMBOLS="AGG BND DBC DIA DVY DXJ EEM EMB EWG EWI EWJ EWP EWQ EWU EWW EWY EWZ EZU FXI GDX GDXJ GLD HEDJ HYG IBB IJR IWM IYR LQD MDY QQQ SLV SPY TLH TLT USO VGK VNQ VTI VWO VYM XLE IYK IYJ"
# SYMBOLS="DIA SPY MDY DVY VYM IJR VTI IWM QQQ"
SYMBOLS="AGG BND LQD MBB TLH TLT HYG JNK EMB PFF IYR VNQ EFA EWG HEDJ VGK DIA DVY IJR IWM MDY SPY VTI VYM XLI FBT IBB XLV FDN QQQ XLY XLE EWT EWY EWW GDX GDXJ GLDX UUP VXX MUB FXY CWB DBA DBB DBC DXJ EEM EWH EWI EWJ EWP EWQ EWS EWU EWZ EZU FXI GLD SLV SMH USO VWO XLU XLB XLP SDS SH PSQ EZA"
# ### available before 2008
# SYMBOLS="SPY MDY EWG EWW DIA XLE XLI XLV XLY QQQ EWY IJR IWM IYR EWT IBB VTI EFA LQD TLT AGG DVY VNQ VGK GDX FBT FDN VYM"

# SYMBOLS="AGG BND LQD MBB TLH TLT MUB"
# SYMBOLS="1 2 3 4 5 6 11 12 16 17 19 23 27 66 83 101 135 144 151 168 267 293 322 386 388 390 489 494 688 700 728 753 762 823 836 857 883 902 914 916 939 941 992 998 1038 1044 1088 1099 1109 1113 1211 1288 1299 1336 1339 1359 1398 1766 1776 1800 1816 1880 1928 1988 2202 2318 2319 2328 2333 2388 2601 2628 2883 3323 3328 3699 3968 3988 6030 6837 6886"
# SYMBOLS="1 2 3 4 5 6 11 12 16 17 19 23 27 66 83 101 135 144 151 168 267 293 322 386 388 390 489 494 688 700 728 753 762 836 857 883 902 914 916 939 941 992 998 1038 1044 1088 1099 1109 1113 1211 1288 1299 1336 1339 1359 1398 1766 1776 1800 1816 1880 1928 1988 2202 2318 2319 2328 2333 2388 2601 2628 2883 3323 3328 3699 3968 3988 6030 6837 6886"
# SYMBOLS="1 5 386 386 388 688 700 762 857 857 883 914 939 939 941 1088 1088 1211 1288 1299 1398 1398 1928 2318 2318 2328 2333 2628 2628 3988 3988 6837"
# SYMBOLS="GLDX GDXJ GDX PFF SPY DIA EEM VWO DXJ EWJ"
# SYMBOLS="AGG BND DBC DIA DVY DXJ EEM EFA EMB EWG EWI EWJ EWP EWQ EWU EWW EWY EWZ EZU FBT FDN FXI GDX GDXJ GLD GLDX HEDJ HYG IBB IJR IWM IYR JNK LQD MDY PFF QQQ SLV SPY TLH TLT USO VGK VNQ VTI VWO VYM XLE XLI XLV XLY CWB MBB SMH RSX EWT EWS EWH DBA DBB INDA"
# SYMBOLS="A AA AAL AAP AAPL ABBV ABC ABT ACN ADBE ADI ADM ADP ADS ADSK ADT AEE AEP AES AET AFL AGN AIG AIV AIZ AKAM ALL ALLE ALXN AMAT AME AMG AMGN AMP AMT AMZN AN ANTM AON APA APC APD APH ARG ATVI AVB AVGO AVY AWK AXP AZO BA BAC BAX BBBY BBT BBY BCR BDX BEN BHI BIIB BK BLK BLL BMY BSX BWA BXLT BXP C CA CAG CAH CAT CB CBG CBS CCE CCI CCL CELG CERN CF CFG CHD CHK CHRW CI CINF CL CLX CMA CMCSA CME CMG CMI CMS CNC CNP COF COG COH COL COP COST CPB CPGX CRM CSCO CSRA CSX CTAS CTL CTSH CTXS CVC CVS CVX CXO D DAL DD DE DFS DG DGX DHI DHR DIS DISCA DISCK DLPH DLTR DNB DO DOV DOW DPS DRI DTE DUK DVA DVN EA EBAY ECL ED EFX EIX EL EMC EMN EMR ENDP EOG EQIX EQR EQT ES ESRX ESS ETFC ETN ETR EW EXC EXPD EXPE EXR F FAST FB FCX FDX FE FFIV FIS FISV FITB FL FLIR FLR FLS FMC FOX FOXA FRT FSLR FTI FTR GAS GD GE GGP GILD GIS GLW GM GME GOOG GOOGL GPC GPS GRMN GS GT GWW HAL HAR HAS HBAN HBI HCA HCN HCP HD HES HIG HOG HOLX HON HOT HP HPE HPQ HRB HRL HRS HSIC HST HSY HUM IBM ICE IFF ILMN INTC INTU IP IPG IR IRM ISRG ITW IVZ JBHT JCI JEC JNJ JNPR JPM JWN K KEY KHC KIM KLAC KMB KMI KMX KO KORS KR KSS KSU L LB LEG LEN LH LLL LLTC LLY LM LMT LNC LOW LRCX LUK LUV LVLT LYB M MA MAC MAR MAS MAT MCD MCHP MCK MCO MDLZ MDT MET MHFI MHK MJN MKC MLM MMC MMM MNK MNST MO MON MOS MPC MRK MRO MS MSFT MSI MTB MU MUR MYL NAVI NBL NDAQ NEE NEM NFLX NFX NI NKE NLSN NOC NOV NRG NSC NTAP NTRS NUE NVDA NWL NWS NWSA O OI OKE OMC ORCL ORLY OXY PAYX PBCT PBI PCAR PCG PCLN PDCO PEG PEP PFE PFG PG PGR PH PHM PKI PLD PM PNC PNR PNW PPG PPL PRGO PRU PSA PSX PVH PWR PX PXD PYPL QCOM QRVO R RAI RCL REGN RF RHI RHT RIG RL ROK ROP ROST RRC RSG RTN SBUX SCG SCHW SE SEE SHW SIG SJM SLB SLG SNA SNDK SNI SO SPG SPLS SRCL SRE STI STJ STT STX STZ SWK SWKS SWN SYF SYK SYMC SYY T TAP TDC TE TEL TGNA TGT THC TIF TJX TMK TMO TRIP TROW TRV TSCO TSN TSO TSS TWC TWX TXN TXT TYC UA UAL UDR UHS UNH UNM UNP UPS URBN URI USB UTX V VAR VFC VIAB VLO VMC VNO VRSK VRSN VRTX VTR VZ WAT WBA WDC WEC WFC WFM WHR WLTW WM WMB WMT WRK WU WY WYN WYNN XEC XEL XL XLNX XOM XRAY XRX XYL YHOO YUM ZBH ZION ZTS"
# IYT IYF IYM
# SYMBOLS="DIA SPY VTI QQQ MDY IWM HYG EMB TLT TLH IYR VNQ IBB AGG BND LQD GDXJ"
DATAFOLDER=/home/qy/Dropbox/dataENF/blmg/data_adj/
#ENDDATE=2016-05-01
ENDDATE=2015-06-20
# CORRELTHRESHOLD=0.60
CORRELTHRESHOLD=0.8
# NUMOFDAYS=756
NUMOFDAYS=504
# NUMOFDAYS=252
TMPFILE=/tmp/rf_backup_qy/correlMatrixCalcr
TMPFILE2=/tmp/rf_backup_qy/correlMatrixCalcr2
SYMFILE=/tmp/rf_backup_qy/correlMatrixCalcr_sym
SHOWMATRIX=F
CALCMINVARWEIGHT=F

clear

cat /dev/null > $TMPFILE
cat /dev/null > $TMPFILE2

CNT=0
for s in $SYMBOLS
do
    echo $DATAFOLDER/$s".csv" >> $TMPFILE
    echo $CNT": "$s
    CNT=$(expr $CNT + 1)
done

echo $SYMBOLS > $SYMFILE

ohlc_bar_alignment $(cat $TMPFILE) > $TMPFILE2
# correl_matrix_calcr $TMPFILE2 $(sd ymd_) 100 0.8 $SHOWMATRIX
correl_matrix_calcr $TMPFILE2 $ENDDATE $NUMOFDAYS $CORRELTHRESHOLD $SHOWMATRIX $SYMFILE $CALCMINVARWEIGHT





